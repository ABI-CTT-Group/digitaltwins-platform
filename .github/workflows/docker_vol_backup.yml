name: Docker volume backup

on:
  workflow_dispatch:

jobs:
  manual_job:
    runs-on: ubuntu-latest
    steps:
      - name: initiate backup
        # ðŸŸ¢ Use '|' for multi-line command and ensure proper indentation
        with:
          ssh-private-key: ${{ secrets.SERVER_SSH_PRIVATE_KEY }}
        run: |
          echo "Sending backup command to docker host"
          
          # Start of Heredoc
          ssh -o StrictHostKeyChecking=no ${{ vars.DEV_DEPLOY_USER }}@${{ vars.DEV_DEPLOY_IP }} << 'EOF'
            cd digitaltwins-platform || exit 1
            ./buildout/util/backup.sh
          EOF
          # ðŸ‘† The closing 'EOF' marker must be left-aligned
          # to the start of the 'ssh' command line when using a heredoc
